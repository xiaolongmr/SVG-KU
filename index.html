<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <!-- 文档基本元信息 -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>SVG 图标复制工具</title>

  <!-- 网站图标 -->
  <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg">
  <link rel="icon" href="/favicon/favicon.ico" />

  <!-- 外部CSS和JavaScript资源 -->
  <script src="https://cdn.tailwindcss.com?plugins=forms"></script>

  <!-- font-awesome 图标库  
     pro版国内镜像地址：https://font.onmicrosoft.cn/font6pro@6.7.1/css/all.min.css
     free版国内镜像地址：https://font.onmicrosoft.cn/@fortawesome/fontawesome-free@7.1.0/css/all.css
     -->
  <link href="https://font.onmicrosoft.cn/font6pro@6.7.1/css/all.min.css" rel="stylesheet">

  <!-- 文件操作相关库 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script> <!-- 用于文件压缩 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script> <!-- 用于文件保存 -->

  <!-- 图片处理相关库 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <!-- 用于HTML元素转图片 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.2.0/svg.min.js"></script> <!-- 用于SVG操作 -->

  <!-- 图标资源文件 -->
  <!-- 网站的核心js文件,所有图标资源都来自这个js文件 -->
  <script src="https://cdn2.codesign.qq.com/icons/rz0WOY47RrQkP0W/latest/iconfont.js"></script>
  <!-- 暂时没有用到，网站所有的图标资源 css版 -->
  <link rel="stylesheet" href="https://cdn2.codesign.qq.com/icons/rz0WOY47RrQkP0W/latest/iconfont.css">

  <!-- 本地样式文件 -->
  <link rel="stylesheet" href="css/styles.css">

  <!-- 语法高亮库 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

  <!-- Tailwind CSS 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#409eff',
            secondary: '#67c23a',
            neutral: {
              100: '#f5f7fa',
              200: '#e4e7ed',
              300: '#dcdfe6',
              800: '#303133',
              900: '#1e1e20'
            }
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
</head>

<body class="font-inter bg-neutral-100 text-neutral-800 min-h-screen transition-basic">
  <!-- 顶部导航栏 -->
  <header class="bg-white shadow-sm py-4 px-6 sticky top-0 z-30">
    <div class="container mx-auto flex flex-wrap justify-between items-center gap-4">
      <!-- Logo和标题 -->
      <div class="flex items-center space-x-2">
        <div class="relative inline-flex items-center justify-center">
          <div id="siteIconContainer" class="w-10 h-10 flex items-center justify-center">
            <i class="fa fa-cube text-primary relative z-10 text-2xl"></i>
          </div>
          <div class="absolute inset-0 bg-primary/20 rounded-full blur-md"></div>
        </div>
        <h1 class="text-xl font-bold">飞草科技图标库</h1>
      </div>

      <!-- 搜索和控制按钮区域 -->
      <div class="flex items-center gap-3 w-full md:w-auto">
        <!-- 搜索框 -->
        <div class="relative flex-grow md:flex-grow-0 md:w-64">
          <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
          <input type="text" id="searchInput" placeholder="搜索图标..."
            class="w-full pl-10 pr-4 py-2 rounded-lg border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-basic">
        </div>

        <!-- 随机颜色和重置颜色按钮组 -->
        <div class="flex border border-neutral-200 rounded-full overflow-hidden">
          <button id="randomColorsBtn" class="p-2 hover:bg-neutral-100 transition-basic" title="随机颜色">
            <i class="fa fa-random text-neutral-600"></i>
          </button>
          <button id="resetAllColorsBtn" class="p-2 hover:bg-neutral-100 transition-basic border-l border-neutral-200"
            title="重置所有颜色">
            <i class="fa fa-refresh text-neutral-600"></i>
          </button>
        </div>

        <!-- 顶部导航栏中的设置按钮已移至右下角面包屑菜单 -->
      </div>
    </div>
  </header>

  <!-- 自定义确认弹窗 -->
  <div id="customConfirmModal" 
    class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center opacity-0 pointer-events-none transition-all duration-200">
    <div 
      class="bg-white rounded-xl p-6 max-w-sm w-full shadow-xl transform scale-95 transition-transform duration-200">
      <div class="text-center mb-6">
        <h3 id="confirmTitle" class="text-xl font-bold mb-2">确认操作</h3>
        <p id="confirmMessage" class="text-gray-600">确定要执行此操作吗？</p>
      </div>
      <div class="flex justify-center space-x-4">
        <button id="confirmCancelBtn" 
          class="px-6 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-all duration-200 text-gray-700 font-medium">
          取消
        </button>
        <button id="confirmOkBtn" 
          class="px-6 py-2 rounded-lg bg-red-500 hover:bg-red-600 transition-all duration-200 text-white font-medium">
          确定
        </button>
      </div>
    </div>
  </div>

  <!-- 设置模态框 -->
  <div id="settingsModal"
    class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center opacity-0 pointer-events-none transition-all duration-200">
    <div
      class="bg-white rounded-xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto shadow-xl transform scale-95 transition-transform duration-200">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-bold">设置</h3>
        <button id="closeSettingsModal"
          class="group text-neutral-500 hover:text-white transition-all duration-200 hover:scale-110 active:scale-95 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-red-500 active:bg-red-500">
          <i class="fa fa-times transition-transform duration-300 group-hover:rotate-180"></i>
        </button>
      </div>

      <!-- 本地存储提示 -->
      <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
        <p class="text-sm text-blue-700">
          您的设置将存储在浏览器本地，也可登录后同步到云端。
        </p>
      </div>

      <!-- 自定义设置表单 -->
      <form id="settingsForm" class="space-y-6">
        <!-- 图标库CDN地址设置 -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">图标库CDN地址</label>
          <input type="url" id="iconCdnUrl"
            placeholder="https://cdn2.codesign.qq.com/icons/rz0WOY47RrQkP0W/latest/iconfont.js"
            class="w-full px-4 py-2 rounded-lg border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-basic">
          <p class="text-xs text-gray-500 mt-1">自定义图标库资源地址，登录<a href="https://codesign.qq.com/app/diver/icon"
              target="_blank" class="text-blue-500 hover:underline"> Codesign
            </a>创建图标资产获取</p>
        </div>

        <!-- 网站名称设置 -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">网站名称</label>
          <input type="text" id="siteName" placeholder="Codesign图标库"
            class="w-full px-4 py-2 rounded-lg border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-basic">
          <p class="text-xs text-gray-500 mt-1">自定义显示在顶部导航栏的网站名称</p>
        </div>

        <!-- 网站图标设置 -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">网站图标</label>
          <input type="text" id="siteIconClass" placeholder="fa-cube"
            class="w-full px-4 py-2 rounded-lg border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-basic">
          <p class="text-xs text-gray-500 mt-1">使用<a href="https://fontawesome.com/search?o=r" target="_blank"
              class="text-blue-500 hover:underline"> Font Awesome Pro </a>图标类名（支持Pro）如：fa-home、fa-star，或直接输入图片URL也可以</p>
        </div>
      </form>

      <div class="flex justify-between mt-8">
        <button id="resetSettingsBtn"
          class="px-4 py-2 border border-neutral-200 rounded-lg hover:bg-neutral-100 transition-basic">
          重置设置
        </button>
        <button id="saveSettingsBtn"
          class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-basic">
          保存设置
        </button>
      </div>
    </div>
  </div>



  <!-- 主内容区 -->
  <main class="container mx-auto px-6 py-8">
    <!-- 统计和操作区 -->
    <div class="flex flex-wrap justify-between items-center mb-6 gap-4">
      <!-- 图标统计信息 -->
      <p class="text-sm text-gray-500">
        共 <span id="iconCount" class="text-primary font-medium">0</span> 个图标
        <span id="selectedCount" class="ml-2 text-gray-500 hidden">
          (已选择 <span class="text-primary font-medium">0</span> 个)
        </span>
      </p>

      <!-- 操作按钮区域 -->
      <div class="flex flex-wrap gap-2">
        <!-- 分组筛选 -->
        <div class="relative">
          <select id="groupFilter" class="filter-select">
            <option value="all">所有图标</option>
            <option value="linear">线性图标 (-x)</option>
            <option value="filled">面性图标 (-m)</option>
            <option value="delicate">精美图标 (-jm)</option>
            <option value="handdrawn">手绘图标 (-sh)</option>
            <option value="flat">扁平图标 (-bp)</option>
            <option value="minimal">简约图标 (-jy)</option>
            <option value="other">其他图标</option>
          </select>
        </div>

        <!-- 批量操作按钮 -->
        <button id="deselectAllBtn"
          class="text-sm bg-white border border-neutral-200 hover:bg-neutral-100 px-3 py-1.5 rounded-lg transition-basic flex items-center gap-1 hidden">
          <i class="fa fa-times transition-transform duration-300 hover:rotate-180"></i>
          <span>取消选择</span>
        </button>
        <button id="downloadSelectedBtn"
          class="text-sm bg-secondary text-white hover:bg-secondary/90 px-3 py-1.5 rounded-lg transition-basic flex items-center gap-1 hidden">
          <i class="fa fa-download"></i>
          <span>下载所选</span>
        </button>
        <button id="downloadAllBtn"
          class="text-sm bg-primary text-white hover:bg-primary/90 px-3 py-1.5 rounded-lg transition-basic flex items-center gap-1">
          <i class="fa fa-download"></i>
          <span>下载全部</span>
        </button>
        <button id="refreshBtn"
          class="text-sm bg-white border border-neutral-200 hover:bg-neutral-100 px-3 py-1.5 rounded-lg transition-basic flex items-center gap-1">
          <i class="fa fa-refresh"></i>
          <span>刷新</span>
        </button>
      </div>
    </div>

    <!-- 多选提示信息 -->
    <div class="bg-blue-50 border-l-4 border-primary p-4 mb-6 rounded-r text-sm">
      <div class="flex items-start">
        <p>按住 <kbd class="px-2 py-0.5 bg-white border rounded text-xs">Ctrl</kbd> 键点击图标可进行多选，选好后可批量下载</p>
      </div>
    </div>

    <!-- 图标网格展示区 -->
    <div id="iconGrid" class="icon-grid">
      <!-- 初始加载状态 -->
      <div class="col-span-full flex justify-center items-center py-20">
        <div class="flex flex-col items-center">
          <div class="w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin mb-3"></div>
          <p class="text-gray-500">加载图标中...</p>
        </div>
      </div>
    </div>

    <!-- 加载更多按钮区域 -->
    <div id="loadMoreContainer" class="col-span-full flex justify-center items-center py-6 hidden">
      <div class="loading-state flex flex-col items-center">
        <div class="w-6 h-6 border-4 border-primary border-t-transparent rounded-full animate-spin mb-2"></div>
        <p class="text-sm text-gray-500">加载更多图标...</p>
      </div>
      <div class="end-state hidden flex flex-col items-center">
        <p class="text-sm text-gray-400 italic">已加载全部图标</p>
      </div>
      <div class="error-state hidden flex flex-col items-center">
        <p class="text-sm text-red-500 mb-2">加载失败</p>
        <button id="retryLoadBtn"
          class="text-xs bg-primary text-white px-2 py-1 rounded hover:bg-primary/90 transition-basic">
          重试
        </button>
      </div>
    </div>
  </main>

  <!-- 图标详情模态框 -->
  <div id="iconModal"
    class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center opacity-0 pointer-events-none transition-basic">
    <!-- 左右导航按钮 -->
    <button id="prevIconBtn"
      class="absolute left-2 sm:left-4 md:left-6 text-white bg-black/50 hover:bg-black/70 w-10 h-10 rounded-full flex items-center justify-center transition-basic z-10">
      <i class="fa fa-angle-left text-xl"></i>
    </button>
    <button id="nextIconBtn"
      class="absolute right-2 sm:right-4 md:right-6 text-white bg-black/50 hover:bg-black/70 w-10 h-10 rounded-full flex items-center justify-center transition-basic z-10">
      <i class="fa fa-angle-right text-xl"></i>
    </button>
    <div
      class="bg-white rounded-xl shadow-xl max-w-5xl w-full mx-4 transform scale-95 transition-basic max-h-[90vh] overflow-y-auto">
      <!-- 模态框标题栏 -->
      <div class="p-5 border-b border-neutral-200 flex justify-between items-center">
        <div class="flex items-center">
          <h3 class="text-lg font-semibold" id="modalTitle">图标详情</h3>
          <button id="copyUrlBtn"
            class="text-neutral-400 hover:text-neutral-600 transition-all duration-200 flex items-center text-sm px-3 py-1 rounded-full">
            <i class="fa-solid fa-link-simple text-[1.9em] hover:text-primary"></i>
            <span class="hidden sm:inline">复制链接</span>
          </button>
        </div>
        <button id="closeModal"
          class="group text-neutral-500 hover:text-white transition-all duration-200 hover:scale-110 active:scale-95 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-red-500 active:bg-red-500">
          <i class="fa fa-times transition-transform duration-300 group-hover:rotate-180"></i>
        </button>
      </div>

      <!-- 模态框内容区域 -->
      <div class="p-5">
        <!-- 优化布局：使用更紧凑的网格系统 -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- 图标预览区域 - 占据左侧一列 -->
          <div class="lg:col-span-1">
            <div
              class="detail-preview-container bg-white border p-4 rounded-lg flex-shrink-0 flex items-center justify-center min-w-[200px] min-h-[280px] overflow-hidden relative bg-[linear-gradient(45deg,#eee_25%,transparent_0,transparent_75%,#eee_0),linear-gradient(45deg,#eee_25%,transparent_0,transparent_75%,#eee_0)] bg-[size:16px_16px] bg-[position:0_0,8px_8px]">
              <div class="flex-1 flex items-center justify-center rounded-lg p-4 relative">
                <div id="modalIconPreview" class="flex items-center justify-center"></div>
              </div>
              <button id="resetIconPositionBtn"
                class="absolute bottom-2 left-2 flex items-center w-8 h-8 justify-center text-neutral-500 hover:text-primary transition-all duration-200 opacity-0 pointer-events-none"
                title="返回中心点">
                <i class="fa-solid fa-crosshairs text-[1.5em]"></i>
              </button>
              <button id="changeBackgroundColorBtn"
                class="absolute bottom-2 right-2 flex items-center w-8 h-8 justify-center text-neutral-500 hover:text-primary transition-all duration-200"
                title="修改背景颜色">
                <!-- <i class="fa-solid fa-palette text-[1.5em] hover:text-primary duration-300"></i> -->
                <i class="fa-solid fa-game-board text-[1.5em] hover:text-primary"></i>
              </button>
            </div>
            <h3 class="text-black text-sm font-medium mt-3 mb-1 flex items-center gap-2">
              <i class="fa-solid fa-lightbulb text-amber-500"></i> 操作小Tips
            </h3>
            <div class="text-gray-500 text-sm mt-1">
              <p>• 点击图标的路径可修改颜色</p>
              <p>• 鼠标放在图标上<b>滚动</b>可调整图标大小</p>
            </div>
            <div id="pathSelectionHelp" class="text-gray-500 text-sm">
              <p>• 按住 <kbd class="px-1 py-0.5 bg-gray-200 border rounded text-xs">Shift</kbd> 多选，按住 <kbd
                  class="px-1 py-0.5 bg-gray-200 border rounded text-xs">Ctrl</kbd> 减选</p>
            </div>
          </div>

          <!-- 图标信息和操作区域 - 占据右侧两列 -->
          <div class="lg:col-span-2">
            <!-- 图标基本信息 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-5">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">图标名称</label>
                <p id="modalIconName" class="font-medium"></p>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">图标分组</label>
                <p id="modalIconGroup" class="font-medium"></p>
              </div>
            </div>

            <!-- 尺寸选择器 -->
            <div class="mb-5 p-4 bg-neutral-50 rounded-lg">
              <label class="block text-sm font-medium text-gray-700 mb-2">选择尺寸 (适用于 PNG)</label>
              <div class="flex flex-wrap gap-2" id="sizeOptions">
                <div
                  class="size-option px-3 py-1.5 border border-primary bg-primary/10 text-primary rounded-md cursor-pointer text-sm"
                  data-size="64">64x64</div>
                <div
                  class="size-option px-3 py-1.5 border border-neutral-200 rounded-md cursor-pointer hover:border-primary hover:bg-primary/5 transition-basic text-sm"
                  data-size="128">128x128</div>
                <div
                  class="size-option px-3 py-1.5 border border-neutral-200 rounded-md cursor-pointer hover:border-primary hover:bg-primary/5 transition-basic text-sm"
                  data-size="256">256x256</div>
                <div
                  class="size-option px-3 py-1.5 border border-neutral-200 rounded-md cursor-pointer hover:border-primary hover:bg-primary/5 transition-basic text-sm"
                  data-size="512">512x512</div>
                <!-- 自定义尺寸输入框 -->
                <div class="custom-size-container flex items-center gap-1">
                  <input type="number" id="customSizeInput" min="1" max="2048" placeholder="自定义"
                    class="w-18 h-8 px-2 border border-neutral-200 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary">
                  <span class="text-sm text-gray-500">x</span>
                  <span id="customSizeDisplay" class="text-sm text-gray-500">?</span>
                  <button id="applyCustomSizeBtn"
                    class="px-2 py-1 text-sm bg-primary text-white rounded hover:bg-primary/90 transition-basic">
                    应用
                  </button>
                </div>
              </div>
            </div>

            <!-- 颜色选择器区域 -->
            <div class="mb-5 p-4 bg-neutral-50 rounded-lg">
              <div class="flex justify-between items-center mb-3">
                <label class="block text-sm font-medium text-gray-700">图标颜色</label>
                <div class="flex gap-2">
                  <button id="randomPathColorBtn"
                    class="text-xs px-2 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded hover:from-purple-600 hover:to-pink-600 transition-all">
                    <i class="fa fa-random mr-1"></i>路径随机上色
                  </button>
                  <button id="resetColorBtn" class="text-xs text-primary hover:text-primary/80 transition-basic">
                    <i class="fa fa-refresh mr-1"></i>重置颜色
                  </button>
                </div>
              </div>

              <!-- 同步开关 -->
              <div class="flex justify-between items-center mb-3 p-2 bg-blue-50 rounded">
                <div class="flex items-center gap-2">
                  <i class="fa fa-sync-alt text-blue-500"></i>
                  <span class="text-sm text-gray-700">与首页图标同步</span>
                  <span class="text-xs text-gray-500">(修改颜色时同步更新首页图标)</span>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" id="syncWithHomePage" class="sr-only peer" checked>
                  <div
                    class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
                  </div>
                </label>
              </div>
            </div>

            <!-- SVG代码展示区域 -->
            <div class="mb-5">
              <label class="block text-sm font-medium text-gray-700 mb-1">SVG 代码</label>
              <div class="relative">
                <pre id="svgCode"
                  class="language-markup bg-neutral-900 text-white p-3 rounded-lg text-sm overflow-x-auto max-h-32 text-xs whitespace-pre-wrap break-all"><code class="language-markup"></code></pre>
                <button id="copySvgBtn"
                  class="absolute top-2 right-2 bg-black/90 hover:bg-black text-white px-2 py-1 rounded text-xs transition-basic">
                  复制
                </button>
              </div>
            </div>

            <!-- 操作按钮区域 -->
            <div class="flex gap-3 pt-2 border-t border-neutral-100">
              <button id="downloadSvgBtn"
                class="flex-1 bg-primary hover:bg-primary/90 text-white text-sm px-4 py-2 rounded-lg transition-basic flex items-center gap-1 justify-center">
                <i class="fa fa-download"></i>
                <span>下载 SVG</span>
              </button>
              <button id="downloadPngBtn"
                class="flex-1 bg-orange-500 hover:bg-orange-600 text-white text-sm px-4 py-2 rounded-lg transition-basic flex items-center gap-1 justify-center">
                <i class="fa fa-download"></i>
                <span>下载 PNG</span>
              </button>
              <button id="copyImageBtn"
                class="flex-1 bg-purple-500 hover:bg-purple-600 text-white text-sm px-4 py-2 rounded-lg transition-basic flex items-center justify-center gap-1 border-none cursor-pointer">
                <i class="fa fa-image"></i>
                <span>复制PNG</span>
              </button>
              <button id="copyDirectBtn"
                class="flex-1 bg-black hover:bg-gray-800 text-white text-sm px-4 py-2 rounded-lg transition-basic flex items-center gap-1 justify-center">
                <i class="fa fa-copy"></i>
                <span>复制代码</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 下载设置模态框 -->
  <div id="downloadSettingsModal"
    class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center opacity-0 pointer-events-none transition-basic">
    <div
      class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4 transform scale-95 transition-basic max-h-[90vh] overflow-y-auto">
      <!-- 模态框标题栏 -->
      <div class="p-5 border-b border-neutral-200 flex justify-between items-center">
        <h3 class="text-lg font-semibold">下载设置</h3>
        <button id="closeDownloadModal"
          class="group text-neutral-500 hover:text-white transition-all duration-200 hover:scale-110 active:scale-95 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-red-500 active:bg-red-500">
          <i class="fa fa-times transition-transform duration-300 group-hover:rotate-180 active:text-white"></i>
        </button>
      </div>

      <!-- 模态框内容区域 -->
      <div class="p-5">
        <!-- 导出格式选择 -->
        <div class="mb-5">
          <label class="block text-sm font-medium text-gray-700 mb-2">导出格式</label>
          <div class="space-y-2">
            <label class="flex items-center">
              <input type="checkbox" id="exportSvg"
                class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded">
              <span class="ml-2 text-sm text-gray-700">SVG 格式</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="exportPng"
                class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded" checked="">
              <span class="ml-2 text-sm text-gray-700">PNG 格式</span>
            </label>
          </div>
        </div>

        <!-- 导出尺寸选择 -->
        <div class="mb-5">
          <label class="block text-sm font-medium text-gray-700 mb-2">导出尺寸 (适用于 PNG)</label>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
            <label class="flex items-center">
              <input type="checkbox" name="exportSizes" value="64"
                class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded">
              <span class="ml-2 text-sm text-gray-700">64x64</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="exportSizes" value="128"
                class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded" checked="">
              <span class="ml-2 text-sm text-gray-700">128x128</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="exportSizes" value="256"
                class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded">
              <span class="ml-2 text-sm text-gray-700">256x256</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" name="exportSizes" value="512"
                class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded" checked="">
              <span class="ml-2 text-sm text-gray-700">512x512</span>
            </label>
          </div>
        </div>

        <!-- 打包选项 -->
        <div class="mb-5">
          <label class="block text-sm font-medium text-gray-700 mb-2">打包选项</label>
          <div class="space-y-2">
            <label class="flex items-center">
              <input type="radio" name="packagingOption" value="by-icon"
                class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded">
              <span class="ml-2 text-sm text-gray-700">按图标分组（每个图标一个文件夹）</span>
            </label>
            <label class="flex items-center">
              <input type="radio" name="packagingOption" value="by-format-size"
                class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded" checked="">
              <span class="ml-2 text-sm text-gray-700">按格式和尺寸分组（相同格式和尺寸打包在一起）</span>
            </label>
            <label class="flex items-center">
              <input type="radio" name="packagingOption" value="single-folder"
                class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded">
              <span class="ml-2 text-sm text-gray-700">一个文件夹下载所有</span>
            </label>
          </div>
        </div>

        <!-- 颜色设置 -->
        <div class="mb-4">
          <label class="flex items-center">
            <input type="checkbox" id="useIndividualColors"
              class="w-4 h-4 text-primary focus:ring-primary border-neutral-300 rounded" checked="">
            <span class="ml-2 text-sm text-gray-700">使用单独设置的图标颜色</span>
          </label>
        </div>

        <!-- 统一颜色选择器 -->
        <div id="batchColorContainer" class="mb-5">
          <label class="block text-sm font-medium text-gray-700 mb-2">统一图标颜色 (如不使用单独颜色)</label>
          <div class="flex items-center gap-3">
            <div
              class="w-10 h-10 rounded-full cursor-pointer overflow-hidden border-2 border-neutral-200 transition-all hover:border-primary">
              <input type="color" id="batchColorPicker" value="#409eff" class="w-full h-full cursor-pointer">
            </div>
            <div class="flex gap-1 flex-wrap">
              <div class="w-6 h-6 rounded-full cursor-pointer transition-all hover:scale-110"
                style="background-color: #409eff;" data-color="#409eff"></div>
              <div class="w-6 h-6 rounded-full cursor-pointer transition-all hover:scale-110"
                style="background-color: #303133;" data-color="#303133"></div>
              <div class="w-6 h-6 rounded-full cursor-pointer transition-all hover:scale-110"
                style="background-color: #ffffff; border: 1px solid #e4e7ed;" data-color="#ffffff"></div>
              <div class="w-6 h-6 rounded-full cursor-pointer transition-all hover:scale-110"
                style="background-color: #f56c6c;" data-color="#f56c6c"></div>
            </div>
          </div>
        </div>

        <!-- 底部操作按钮 -->
        <div class="flex justify-end gap-3 pt-3 border-t border-neutral-200">
          <button id="cancelDownloadBtn"
            class="bg-white border border-neutral-200 hover:bg-neutral-100 text-sm px-4 py-2 rounded-lg transition-basic">
            取消
          </button>
          <button id="confirmDownloadBtn"
            class="bg-secondary hover:bg-secondary/90 text-white text-sm px-4 py-2 rounded-lg transition-basic">
            确认下载
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 提示框组件 -->
  <div id="toast"
    class="fixed bottom-6 right-6 px-4 py-2 rounded-lg shadow-lg transform translate-y-10 opacity-0 transition-basic flex items-center gap-2 z-50">
  </div>

  <!-- 隐藏的PNG转换容器 - 用于后台进行PNG转换处理 -->
  <div id="pngConversionContainer" class="hidden absolute top-0 left-0 z-0"></div>

  <!-- 内嵌JavaScript已移至单独文件 -->

  <!-- 面包屑菜单按钮 - 位于右下角（上移一些位置） -->
  <div id="breadcrumbMenu" class="fixed bottom-16 right-6 z-40">
    <!-- 面包屑按钮 -->
    <button id="breadcrumbBtn"
      class="w-10 h-10 bg-primary text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:bg-primary/90 active:scale-95">
      <i class="fa fa-bars text-lg"></i>
    </button>

    <!-- 四个弹出按钮 - 调整容器位置，使其位于面包屑按钮的左上角 -->
    <div id="breadcrumbItems"
      class="absolute top-0 right-full opacity-0 pointer-events-none transition-all duration-300">
      <!-- 设置按钮 -->
      <button id="settingsBtn"
        class="absolute w-10 h-10 bg-white text-neutral-800 rounded-full shadow-md flex items-center justify-center transition-all duration-300 hover:bg-neutral-50 hover:text-primary"
        title="设置">
        <i class="fa fa-cog text-lg"></i>
      </button>

      <!-- 评论按钮 -->
      <button id="breadcrumbCommentBtn"
        class="absolute w-10 h-10 bg-white text-neutral-800 rounded-full shadow-md flex items-center justify-center transition-all duration-300 hover:bg-neutral-50 hover:text-primary"
        title="评论">
        <i class="fa fa-comment text-lg"></i>
      </button>

      <!-- 登录按钮 -->
      <button id="breadcrumbLoginBtn"
        class="absolute w-10 h-10 bg-white text-neutral-800 rounded-full shadow-md flex items-center justify-center transition-all duration-300 hover:bg-neutral-50 hover:text-primary"
        title="登录">
        <i class="fa fa-sign-in-alt text-lg"></i>
      </button>

      <!-- 打赏按钮 -->
      <button id="breadcrumbDonationBtn"
        class="absolute w-10 h-10 bg-white text-neutral-800 rounded-full shadow-md flex items-center justify-center transition-all duration-300 hover:bg-neutral-50 hover:text-primary"
        title="打赏">
        <i class="fa fa-heart text-lg"></i>
      </button>
    </div>
  </div>

  <!-- 颜色选择器弹窗模板 -->
  <template id="pathColorPickerTemplate">
    <div
      class="path-color-picker-popup fixed z-50 bg-white border border-gray-300 rounded-xl shadow-lg p-4 min-w-[200px]">
      <div class="mb-2">
        <label
          class="block text-sm font-medium text-gray-700 mb-1 flex items-center justify-between cursor-move bg-gray-100 px-3 py-2 border-b border-gray-200 rounded-t-xl -mx-4 -mt-4 mb-4">
          <span class="path-label"></span>
          <div class="drag-handle flex items-center justify-center p-1 select-none">
            <i class="fa fa-grip-vertical text-gray-500"></i>
          </div>
        </label>
        <input type="color" class="path-color-input w-full h-8 rounded border cursor-pointer">
      </div>
      <!-- 预设颜色容器 - 通过JS动态生成颜色选项 -->
      <div id="presetColorsContainer" class="flex gap-1 flex-wrap mb-3">
      </div>
      <div class="flex gap-2">
        <button
          class="apply-color-btn w-full px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">应用</button>
        <button
          class="cancel-color-btn w-full px-3 py-1 bg-gray-300 text-gray-700 rounded text-sm hover:bg-gray-400">取消</button>
      </div>
    </div>
  </template>

  <!-- 本地脚本文件引入 -->
  <script src="js/syntax-highlight.js"></script> <!-- 语法高亮功能 -->
  <script src="js/color-manager.js"></script> <!-- 颜色管理功能 -->
  <script src="js/download-manager.js"></script> <!-- 下载管理功能 -->
  <script src="js/ps-plugin-utils.js"></script> <!-- Photoshop插件相关功能 -->
  <script src="js/main.js"></script> <!-- 主脚本逻辑 -->
  <script src="js/settings.js"></script> <!-- 设置管理功能 -->
  <script src="js/breadcrumb-menu.js"></script> <!-- 面包屑菜单功能 -->
  <!-- 评论弹窗 -->
  <div id="commentModal"
    class="fixed inset-0 bg-black/70 z-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300">
    <div
      class="relative bg-white rounded-xl w-full max-w-4xl max-h-[80vh] overflow-hidden shadow-2xl transform scale-95 transition-transform duration-300">
      <!-- 关闭按钮 -->
      <button id="closeCommentModal"
        class="absolute top-4 right-4 group text-neutral-500 hover:text-white transition-all duration-200 hover:scale-110 active:scale-95 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-red-500 active:bg-red-500 z-10">
        <i class="fa fa-times transition-transform duration-300 group-hover:rotate-180"></i>
      </button>

      <!-- 弹窗标题 -->
      <div class="border-b border-neutral-200 px-6 py-4 bg-neutral-50">
        <h3 class="text-xl font-medium text-neutral-800">评论区</h3>
      </div>

      <!-- 评论内容容器 -->
      <div class="p-6 overflow-y-auto max-h-[calc(80vh-120px)]">
        <div id="twikoo" class="w-full"></div>
      </div>
    </div>
  </div>

  <!-- 登录弹窗 -->
  <div id="loginModal"
    class="fixed inset-0 bg-black/70 z-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300">
    <div
      class="relative bg-white rounded-xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl transform scale-95 transition-transform duration-300">
      <!-- 关闭按钮 -->
      <button id="closeLoginModal"
        class="absolute top-4 right-4 group text-neutral-500 hover:text-white transition-all duration-200 hover:scale-110 active:scale-95 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-red-500 active:bg-red-500 z-10">
        <i class="fa fa-times transition-transform duration-300 group-hover:rotate-180"></i>
      </button>

      <!-- 弹窗标题 -->
      <div class="border-b border-neutral-200 px-6 py-4 bg-neutral-50">
        <h3 class="text-xl font-medium text-neutral-800">登录</h3>
      </div>

      <!-- 登录内容 -->
      <div class="p-6 text-center">
        <p class="text-neutral-600 mb-8">登录功能开发中，敬请期待！</p>
        <img src="https://cdn-icons-png.flaticon.com/512/2838/2838408.png" alt="登录开发中"
          class="w-48 h-48 mx-auto opacity-70">
      </div>
    </div>
  </div>

  <!-- 打赏弹窗 -->
  <div id="donationModal"
    class="fixed inset-0 bg-black/70 z-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300">
    <div
      class="relative bg-white rounded-xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-2xl transform scale-95 transition-transform duration-300">
      <!-- 关闭按钮 -->
      <button id="closeDonationModal"
        class="absolute top-4 right-4 group text-neutral-500 hover:text-white transition-all duration-200 hover:scale-110 active:scale-95 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-red-500 active:bg-red-500 z-10">
        <i class="fa fa-times transition-transform duration-300 group-hover:rotate-180"></i>
      </button>

      <!-- 弹窗标题 -->
      <div class="border-b border-neutral-200 px-6 py-4 bg-neutral-50">
        <h3 class="text-xl font-medium text-neutral-800">打赏支持</h3>
      </div>

      <!-- 打赏内容 -->
      <div class="p-6">
        <!-- 趣味性选项 -->
        <div id="donationOptions" class="space-y-4 mb-6">
          <h4 class="font-medium text-neutral-700 mb-2">请选择您想表达的心意：</h4>
          <div class="grid grid-cols-3 gap-3">
            <button
              class="donation-option bg-blue-50 p-4 rounded-lg border-2 border-transparent hover:border-blue-300 transition-all flex flex-col items-center justify-center"
              data-type="cola">
              <i class="fa fa-wine-bottle text-blue-500 text-2xl mb-2"></i>
              <span class="text-sm text-neutral-700">送可乐</span>
              <span class="text-xs text-neutral-500 mt-1">3币</span>
            </button>
            <button
              class="donation-option bg-yellow-50 p-4 rounded-lg border-2 border-transparent hover:border-yellow-300 transition-all flex flex-col items-center justify-center"
              data-type="chicken">
              <i class="fa fa-drumstick-bite text-yellow-500 text-2xl mb-2"></i>
              <span class="text-sm text-neutral-700">加鸡腿</span>
              <span class="text-xs text-neutral-500 mt-1">10币</span>
            </button>
            <button
              class="donation-option bg-red-50 p-4 rounded-lg border-2 border-transparent hover:border-red-300 transition-all flex flex-col items-center justify-center"
              data-type="flower">
              <i class="fa fa-hamburger text-red-500 text-2xl mb-2"></i>
              <span class="text-sm text-neutral-700">疯狂星期四</span>
              <span class="text-xs text-neutral-500 mt-1">50币</span>
            </button>
          </div>
        </div>

        <!-- 感谢信息 -->
        <div id="donationThanks" class="hidden text-center mb-6">
          <div class="mb-4">
            <i class="fa fa-heart text-red-500 text-4xl animate-bounce"></i>
          </div>
          <h4 id="thanksMessage" class="font-medium text-lg text-neutral-800 mb-2"></h4>
          <p class="text-neutral-600 text-sm">非常感谢您的支持！</p>
        </div>

        <!-- 收款码区域 -->
        <div id="paymentQRCode" class="hidden text-center">
          <h4 class="font-medium text-neutral-700 mb-4">请选择支持方式：</h4>
          <img
            src="https://deskpad.oss-cn-shanghai.aliyuncs.com/_sitefiles/donationimages/388875_20250722_034754_%E8%B5%9E%E8%B5%8F%E7%A0%81%E9%A1%B5%E9%9D%A2.jpg"
            alt="收款码" class="w-full max-w-xs mx-auto rounded-lg shadow-md">
        </div>

        <!-- 打赏名单 -->
        <div class="mt-6">
          <h4 class="font-medium text-neutral-700 mb-2">打赏感谢名单：</h4>
          <div class="bg-neutral-50 rounded-lg p-4 max-h-32 overflow-y-auto">
            <ul class="space-y-2 text-sm text-neutral-600">
              <li class="flex justify-between items-center"><span>匿名用户</span><span
                  class="text-xs text-neutral-400">送了一杯可乐 (3币)</span></li>
              <li class="flex justify-between items-center"><span>李*明</span><span
                  class="text-xs text-neutral-400">加了一只鸡腿 (5币)</span></li>
              <li class="flex justify-between items-center"><span>张**</span><span
                  class="text-xs text-neutral-400">送了一杯可乐 (3币)</span></li>
              <li class="flex justify-between items-center"><span>微信用户_9527</span><span
                  class="text-xs text-neutral-400">加了一只鸡腿 (5币)</span></li>
              <li class="flex justify-between items-center"><span>支付宝用户</span><span
                  class="text-xs text-neutral-400">送了一杯可乐 (3币)</span></li>
              <li class="flex justify-between items-center"><span>爱喝咖啡的猫</span><span
                  class="text-xs text-neutral-400">加了一只鸡腿 (5币)</span></li>
              <li class="flex justify-between items-center"><span>匿名</span><span class="text-xs text-neutral-400">送了一杯可乐
                  (3币)</span></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 引入twikoo评论系统 -->
  <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.32/dist/twikoo.all.min.js"></script>

</body>

</html>